<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤ –¥–ª—è –§–û–ü</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; padding: 16px; }
    .card { max-width: 420px; background: #f3efe9; border-radius: 16px; padding: 18px; }
    h3 { margin: 0 0 12px; font-size: 24px; }
    label { display:block; margin: 10px 0 6px; font-weight: 600; }
    select, input { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid #cfcfcf; font-size: 16px; }
    button { width: 100%; margin-top: 14px; padding: 12px 14px; border-radius: 14px; border: 0; cursor: pointer; font-size: 18px; font-weight: 700; background: #1f2a44; color: #fff; }
    #result { margin-top: 14px; line-height: 1.5; }
    .reset { margin-top: 10px; cursor: pointer; color: #1f2a44; font-weight: 600; user-select:none; }
  </style>
</head>
<body>
  <div class="card">
    <h3>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤ –¥–ª—è –§–û–ü</h3>

    <label for="group">–û–±–µ—Ä—ñ—Ç—å –≥—Ä—É–ø—É:</label>
    <select id="group">
      <option value="1">–§–û–ü 1 –≥—Ä—É–ø–∞</option>
      <option value="2">–§–û–ü 2 –≥—Ä—É–ø–∞</option>
      <option value="3-yes">–§–û–ü 3 –≥—Ä—É–ø–∞ (–ø–ª–∞—Ç–Ω–∏–∫ –ü–î–í)</option>
      <option value="3-no">–§–û–ü 3 –≥—Ä—É–ø–∞ (–Ω–µ –ø–ª–∞—Ç–Ω–∏–∫ –ü–î–í)</option>
    </select>

    <label id="period-label" for="period">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º—ñ—Å—è—Ü—ñ–≤:</label>
    <select id="period"></select>

    <div id="income-wrap" style="display:none;">
      <label id="income-label" for="income">–î–æ—Ö—ñ–¥ (–≥—Ä–Ω):</label>
      <input id="income" type="number" min="0" step="0.01" value="0" />
    </div>

    <button type="button" id="calc">–†–û–ó–†–ê–•–£–í–ê–¢–ò</button>

    <div id="result" aria-live="polite"></div>
    <div id="reset" class="reset" style="display:none;">üîÑ –°–∫–∏–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏</div>
  </div>

  <script>
    const group = document.getElementById('group');
    const period = document.getElementById('period');
    const periodLabel = document.getElementById('period-label');
    const incomeWrap = document.getElementById('income-wrap');
    const incomeLabel = document.getElementById('income-label');
    const income = document.getElementById('income');
    const result = document.getElementById('result');
    const reset = document.getElementById('reset');
    const MAX_INCOME = 9336000;

    function format(num) {
      return num.toLocaleString('uk-UA', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + "\u00A0–≥—Ä–Ω.";
    }

    function updatePeriods() {
      period.innerHTML = '';
      const g = group.value;

      if (g === '1' || g === '2') {
        periodLabel.textContent = '–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º—ñ—Å—è—Ü—ñ–≤:';
        for (let i=1; i<=12; i++) {
          const opt = document.createElement('option');
          opt.value = i; opt.textContent = i;
          period.appendChild(opt);
        }
      } else {
        periodLabel.textContent = '–ü–µ—Ä—ñ–æ–¥:';
        [
          {v:3,t:'–ö–≤–∞—Ä—Ç–∞–ª'},
          {v:6,t:'–ü—ñ–≤—Ä—ñ—á—á—è'},
          {v:9,t:'9 –º—ñ—Å—è—Ü—ñ–≤'},
          {v:12,t:'–†—ñ–∫'},
        ].forEach(p => {
          const opt = document.createElement('option');
          opt.value = p.v; opt.textContent = p.t;
          period.appendChild(opt);
        });
      }

      incomeWrap.style.display = g.startsWith('3') ? 'block' : 'none';
      incomeLabel.textContent = (g === '3-yes') ? '–î–æ—Ö—ñ–¥ –±–µ–∑ –ü–î–í (–≥—Ä–Ω):' : '–î–æ—Ö—ñ–¥ (–≥—Ä–Ω):';

      result.innerHTML = '';
      reset.style.display = 'none';
    }

    function calculate() {
      const g = group.value;
      const m = +period.value;
      let inc = +income.value || 0;
      if (inc < 0) inc = 0;
      if (inc > MAX_INCOME) inc = MAX_INCOME;

      let single = 0, military = 0, esv = 0;

      if (g === '1') {
        single = 302.8 * m;
        military = 800 * m;
        esv = 1760 * m;
      } else if (g === '2') {
        single = 1600 * m;
        military = 800 * m;
        esv = 1760 * m;
      } else {
        single = inc * (g === '3-yes' ? 0.03 : 0.05);
        military = inc * 0.01;
        esv = 1760 * m;
      }

      const total = single + military + esv;
      const net = g.startsWith('3') ? (inc - total) : null;

      result.innerHTML =
        `–Ñ–¥–∏–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫: ${format(single)}<br>` +
        `–í—ñ–π—Å—å–∫–æ–≤–∏–π –∑–±—ñ—Ä: ${format(military)}<br>` +
        `–Ñ–°–í: ${format(esv)}<br>` +
        `<strong>–ó–∞–≥–∞–ª—å–Ω–∏–π –ø–æ–¥–∞—Ç–æ–∫: ${format(total)}</strong>` +
        (net !== null ? `<br><strong>–ß–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥: ${format(net)}</strong>` : '');

      reset.style.display = 'block';
    }

    group.addEventListener('change', updatePeriods);
    document.getElementById('calc').addEventListener('click', calculate);
    reset.addEventListener('click', () => {
      result.innerHTML = '';
      reset.style.display = 'none';
      income.value = 0;
    });

    updatePeriods();
  </script>
</body>
</html>
